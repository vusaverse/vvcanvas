<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Uploading QTI Files and Updating Quiz Parameters in Canvas LMS • vvcanvas</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Uploading QTI Files and Updating Quiz Parameters in Canvas LMS">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">vvcanvas</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting_started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/groups_use_case.html">Working with groups</a></li>
    <li><a class="dropdown-item" href="../articles/QTI_quiz.html">Uploading QTI Files and Updating Quiz Parameters in Canvas LMS</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/vusaverse/vvcanvas/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Uploading QTI Files and Updating Quiz Parameters in Canvas LMS</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/vusaverse/vvcanvas/blob/main/vignettes/QTI_quiz.Rmd" class="external-link"><code>vignettes/QTI_quiz.Rmd</code></a></small>
      <div class="d-none name"><code>QTI_quiz.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/vusaverse/vvcanvas" class="external-link">vvcanvas</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette demonstrates how to upload a QTI file to Canvas LMS,
retrieve the ID of the newly created quiz, and update quiz parameters
using R. The process involves using the
<code>upload_qti_file_with_migration</code>,
<code>get_course_quizzes</code> and <code>update_quiz</code>
functions.</p>
</div>
<div class="section level2">
<h2 id="step-1-authenticate-with-canvas">Step 1: Authenticate with Canvas<a class="anchor" aria-label="anchor" href="#step-1-authenticate-with-canvas"></a>
</h2>
<p>First, authenticate with Canvas by creating a canvas object
containing your API key and base URL:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">canvas</span> <span class="op">&lt;-</span> <span class="fu">vvcanvas</span><span class="fu">::</span><span class="fu"><a href="../reference/canvas_authenticate.html">canvas_authenticate</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-2-retrieve-the-list-of-quizzes">Step 2: Retrieve the List of Quizzes<a class="anchor" aria-label="anchor" href="#step-2-retrieve-the-list-of-quizzes"></a>
</h2>
<p>Set the course in which the upload must take place and retrieve the
list of quizzes already available before uploading the new QTI file into
the course:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">course_id</span> <span class="op">&lt;-</span> <span class="st">"12345"</span> <span class="co"># Replace with your actual course ID</span></span>
<span><span class="va">quizzes_before</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_course_quizzes.html">get_course_quizzes</a></span><span class="op">(</span><span class="va">canvas</span>, <span class="va">course_id</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-3-upload-the-qti-file">Step 3: Upload the QTI File<a class="anchor" aria-label="anchor" href="#step-3-upload-the-qti-file"></a>
</h2>
<p>The time that Canvas requires to process the uploaded QTI file is
hard to predict. It depends on the traffic on the Canvas server, and
possibly the number of migrations the user has recently performed.
Therefore, in circumstances with much waiting time a different approach
is advised than when waiting time is short. In the latter case the ID of
the quiz is easily obtained, and in the former case the ID needs to be
determined using a more extensive approach requiring two additional
steps.</p>
<p>If processing takes little time (e.g., 5 to 10 seconds), one can
obtain the ID of the quiz directly using the
<code>upload_qti_file_with_migration</code> function setting
<code>wait = TRUE</code>, by which the function waits 30 seconds after
uploading the QTI file to check if it has been converted into a new
quiz. If a new quiz has been created it returns the ID of the quiz; if
not it asks the user if further waiting is required. Assuming the QTI
file, stored in the working directory, is called “qti_file.zip”, the
following code may be used:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qti_name</span> <span class="op">&lt;-</span> <span class="st">"qti_file"</span> <span class="co"># Replace with your actual file name</span></span>
<span><span class="va">quiz_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/upload_qti_file_with_migration.html">upload_qti_file_with_migration</a></span><span class="op">(</span><span class="va">canvas</span>, <span class="va">course_id</span>, <span class="va">qti_name</span>, wait <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Note that if this route is successful, one can directly <strong>go to
step 6</strong>.</p>
<p>By contrast, if one prefers or is forced to use the extensive
approach, it is advised to use the following code, which also requires
steps 4 and 5:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qti_name</span> <span class="op">&lt;-</span> <span class="st">"qti_file"</span> <span class="co"># Replace with your actual file name</span></span>
<span><span class="fu"><a href="../reference/upload_qti_file_with_migration.html">upload_qti_file_with_migration</a></span><span class="op">(</span><span class="va">canvas</span>, <span class="va">course_id</span>, <span class="va">qti_name</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-4-retrieve-quizzes-after-upload-extensive-approach">Step 4: Retrieve Quizzes After Upload (extensive approach)<a class="anchor" aria-label="anchor" href="#step-4-retrieve-quizzes-after-upload-extensive-approach"></a>
</h2>
<p>For the extensive approach it is advised to wait sufficient time to
make sure the QTI is converted into a quiz (sometimes it takes one or
two hours). Next, retrieve the list of quizzes again after the QTI file
upload using:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">quizzes_after</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_course_quizzes.html">get_course_quizzes</a></span><span class="op">(</span><span class="va">canvas</span>, <span class="va">course_id</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">quizzes_after</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-5-identify-the-new-quiz-extensive-approach">Step 5: Identify the New Quiz (extensive approach)<a class="anchor" aria-label="anchor" href="#step-5-identify-the-new-quiz-extensive-approach"></a>
</h2>
<p>Compare the lists of quizzes before and after the upload to identify
the ID of the newly created quiz:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">quiz_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="va">quizzes_after</span>, <span class="va">quizzes_before</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">new_quiz</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-6-update-quiz-parameters">Step 6: Update Quiz Parameters<a class="anchor" aria-label="anchor" href="#step-6-update-quiz-parameters"></a>
</h2>
<p>Use the update_quiz function to modify the parameters of the newly
created quiz:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">quiz_params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"Updated Quiz Title"</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Updated description of the quiz."</span>,</span>
<span>  due_at <span class="op">=</span> <span class="st">"2013-01-23T23:59:00-07:00"</span>,</span>
<span>  published <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">updated_quiz</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/update_quiz.html">update_quiz</a></span><span class="op">(</span><span class="va">canvas</span>, <span class="va">course_id</span>, <span class="va">quiz_id</span>, <span class="va">quiz_params</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">updated_quiz</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>This vignette demonstrated how to upload a QTI file to Canvas LMS,
identify the newly created quiz, and update its parameters. You can
extend this process to modify other quiz attributes as needed.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tomer Iwan.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
